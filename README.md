# Проект Mesto фронтенд + бэкенд

## Директории

`/routes` — папка с файлами роутера  
`/controllers` — папка с файлами контроллеров пользователя и карточки   
`/models` — папка с файлами описания схем пользователя и карточки  
  
Остальные директории вспомогательные, создаются при необходимости разработчиком

## Инструкция по развертыванию проекта локально через [Git BASH](https://gitforwindows.org/) (терминал):
1. Скачайте и установите [Node.js с официального сайта](https://nodejs.org/en/download/) (по необходимости).
2. Клонируйте репозиторий в корневую папку командой: 
    `git clone https://github.com/a1rudy/express-mesto.git`
3. Установите node_modules командой: 
    `npm install`
4. Запуститите сервер командой: 
    `npm run start`  
    Запуск сервера с hot-reload: 
    `npm run dev`

## Запросы на стороне backend

### Регистрация

  POST http://localhost:3000/signup

  В теле запроса передать объект вида

    {
      "email": "admin@admin.ru",
      "password": "password",
      "name": "Жак-Ив Кусто",
      "about": "Исследователь",
      "avatar": "https://pictures.s3.yandex.net/resources/jacques-cousteau_1604399756.png"
    }
  
  :heavy_check_mark: При успехе в ответе приходит объект пользователя со статусом `200`.
  
  :x: При попытке создать пользователя с уже существующей в базе почтой приходит ответ со статусом `409` и сообщением `Пользователь с таким email уже существует`.
  
  :x: При попытке создать пользователя с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.
  
  
### Авторизация

POST http://localhost:3000/signin
  
В теле запроса передать объект вида

    {
      "email": "admin@admin.ru",
      "password": "password"
    }
  
:heavy_check_mark: При успехе приходит токен пользователя со статусом `200`

:x: При неправильных почте и/или пароле приходит ответ со статусом `401` и сообщением `Неправильные email или пароль`.

### Редактирование информации по пользователе

PATCH http://localhost:3000/users/me

В теле запроса передать объект вида

    {
      "name": "Жак-Ив Кусто",
      "about": "Исследователь"
    }
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект пользователя со статусом `200`.
  
:x: При попытке создать пользователя с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.

### Редактирование аватара

PATCH http://localhost:3000/users/me/avatar

В теле запроса передать объект вида

    {
       "avatar": "https://yt3.ggpht.com/a/AATXAJznefE2NAKK7HmoPoDjeb_WiaCvbb46VcboJ9WASA=s900-c-k-c0xffffffff-no-rj-mo"
    }
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект пользователя со статусом `200`.
  
:x: При попытке создать пользователя с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.

### Добавление карточки
  
POST http://localhost:3000/cards

В теле запроса передать объект вида

    {
       "name": "Домбай",
       "link": "https://avatars.mds.yandex.net/get-zen_doc/242954/pub_5a6badb78c8be3d2b463b301_5a6badd1ad0f22829e707691/scale_1200"
    }
  
:heavy_check_mark: При успехе в ответе приходит объект карточки со статусом `200`.
  
:x: При попытке создать карточку с некорректными данными приходит ответ со статусом `400` и ошибкой валидации.
  
### Лайк карточки
  
PUT http://localhost:3000/cards/:id/likes
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект карточки со статусом `200`.
  
:x: При попытке лайкнуть карточку с несуществующим в базе id приходит ответ со статусом `404` и сообщением `Карточка с указанным id не найдена.`.

:x: При попытке лайкнуть карточку с некорректным id приходит ответ со статусом `400` и ошибкой валидации.
  
### Дизлайк карточки
  
DELETE http://localhost:3000/cards/:id/likes
  
:heavy_check_mark: При успехе в ответе приходит обновлённый объект карточки со статусом `200`.
  
:x: При попытке дизлайкнуть карточку с несуществующим в базе id приходит ответ со статусом `404` и сообщением `Карточка с указанным id не найдена.`.

:x: При попытке дизлайкнуть карточку с некорректным id приходит ответ со статусом `400` и ошибкой валидации.

### Удаление карточки
  
DELETE http://localhost:3000/cards/:id
  
:heavy_check_mark: При успехе в ответе приходит сообщение `Карточка удалена.` со статусом `200`.
  
:x: При попытке удалить чужую карточку приходит ответ со статусом `403` и сообщением `Отсутствуют права на уделение карточки.`.

:x: При повторной попытке удалить карточку или попытке удалить карточку с несуществующим в базе id приходит ответ со статусом `404` и сообщением `Карточка с указанным id не найдена.`.

:x: При попытке удалить карточку с некорректным id приходит ответ со статусом `400` и ошибкой валидации.
